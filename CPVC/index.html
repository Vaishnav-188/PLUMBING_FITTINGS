<!DOCTYPE html>
<html>
<head>
    <title>CPVC Items List</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        body {
            font-family: Arial;
            padding: 20px;
        }
        .item {
            display: flex;
            flex-wrap: wrap; /* add this */
            justify-content: space-between;
            margin-bottom: 8px;
            background: #f7f7f7;
            padding: 10px;
            border-radius: 6px;
        }
        .item span {
             flex: 1; /* take available width */
             word-break: break-word; /* wrap long text */
        }

        button {
            padding: 5px 12px;
            border: none;
            background: green;
            color: white;
            border-radius: 5px;
            cursor: pointer;
        }
        #tableDiv {
            margin-top: 30px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        table, th, td {
            border: 1px solid black;
        }
        th, td {
            padding: 8px;
            text-align: left;
        }
        #downloadBtn {
            background: red;
            margin-top: 20px;
        }

        /* Step 3: Mobile button and table font adjust */
        @media (max-width: 480px) {
            button {
                padding: 4px 8px;      /* smaller buttons on small screens */
                font-size: 14px;
            }

            #tableDiv {
                overflow-x: auto;      /* allow horizontal scroll if table is too wide */
            }

            table {
                font-size: 14px;       /* smaller font for table on mobile */
            }
        }

        /* Step 4: Optional table scroll for all screens */
        #tableDiv {
            overflow-x: auto;  /* horizontal scroll if table overflows */
        }

    </style>

</head>
<body>

<h2>CPVC FITTINGS LIST</h2>

    <div class="item">
        <span>3/4" CPVC PIPE SDR-11 (5M)</span>
        <button class="add-btn" onclick="addItem('3/4&quot; CPVC PIPE SDR-11 (5M)')">+</button>
    </div>
    <div class="item">
        <span>3/4" CPVC ELBOW</span>
        <button class="add-btn" onclick="addItem('3/4&quot; CPVC ELBOW')">+</button>
    </div>
    <div class="item">
        <span>3/4" CPVC TEE</span>
        <button class="add-btn" onclick="addItem('3/4&quot; CPVC TEE')">+</button>
    </div>
    <div class="item">
        <span>3/4" CPVC STEPOVER  BEND</span>
        <button class="add-btn" onclick="addItem('3/4&quot; CPVC STEPOVER  BEND')">+</button>
    </div>
    <div class="item">
        <span>3/4" CPVC CONVECTION BUSH</span>
        <button class="add-btn" onclick="addItem('3/4&quot; CPVC CONVECTION BUSH')">+</button>
    </div>
    <div class="item">
        <span>3/4" CPVC REDUCER</span>
        <button class="add-btn" onclick="addItem('3/4&quot; CPVC REDUCER')">+</button>
    </div>
    <div class="item">
        <span>3/4" CPVC CUPLING</span>
        <button class="add-btn" onclick="addItem('3/4&quot; CPVC CUPLING')">+</button>
    </div>
    <div class="item">
        <span>3/4" CPVC END CAP</span>
        <button class="add-btn" onclick="addItem('3/4&quot; CPVC END CAP')">+</button>
    </div>
    <div class="item">
        <span>3/4" CPVC MTA</span>
        <button class="add-btn" onclick="addItem('3/4&quot; CPVC MTA')">+</button>
    </div>
    <div class="item">
        <span>3/4" CPVC SHOE</span>
        <button class="add-btn" onclick="addItem('3/4&quot; CPVC SHOE')">+</button>
    </div>
    <div class="item">
        <span>3/4" CPVC FTA</span>
        <button class="add-btn" onclick="addItem('3/4&quot; CPVC FTA')">+</button>
    </div>
    <div class="item">
        <span>3/4" x 1/2" CPVC ELBOW</span>
        <button class="add-btn" onclick="addItem('3/4&quot; x 1/2&quot; CPVC ELBOW')">+</button>
    </div>
    <div class="item">
        <span>3/4" x 1/2" CPVC TEE</span>
        <button class="add-btn" onclick="addItem('3/4&quot; x 1/2&quot; CPVC TEE')">+</button>
    </div>
    <div class="item">
        <span>3/4" x 1/2" CPVC REDUCER</span>
        <button class="add-btn" onclick="addItem('3/4&quot; x 1/2&quot; CPVC REDUCER')">+</button>
    </div>
    <div class="item">
        <span>3/4" x 1/2" CPVC MTA</span>
        <button class="add-btn" onclick="addItem('3/4&quot; x 1/2&quot; CPVC MTA')">+</button>
    </div>
    <div class="item">
        <span>1/2" TESTING PLUG </span>
        <button class="add-btn" onclick="addItem('1/2&quot; TESTING PLUG ')">+</button>
    </div>
    <div class="item">
        <span>CPVC PASTE (118 ML)</span>
        <button class="add-btn" onclick="addItem('CPVC PASTE (118 ML)')">+</button>
    </div>
    <div class="item">
        <span>BLACK BINDING WIRE </span>
        <button class="add-btn" onclick="addItem('BLACK BINDING WIRE')">+</button>
    </div>
    <div class="item">
        <span>CLOTH WASTE</span>
        <button class="add-btn" onclick="addItem('CLOTH WASTE')">+</button>
    </div>

<div id="tableDiv">
    <h3>SELECTED ITEMS</h3>
    <table id="outputTable">
        <thead>
            <tr>
                <th>S.NO</th>
                <th>ITEM NAME</th>
                <th>QUANTITY</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <button id="downloadBtn" onclick="downloadPDF()">Download PDF</button>

</div>

<script>

let list = [];
function addItem(name) {
    let existing = list.find(x => x.name === name);
    if (existing) {
        existing.qty += 1;
    } else {
        list.push({ name: name, qty: 1 });
    }
    renderTable();
}

function renderTable() {
    const tbody = document.querySelector("#outputTable tbody");
    tbody.innerHTML = "";
    list.forEach((item, index) => {
        tbody.innerHTML += `
            <tr>
                <td>${index + 1}</td>
                <td>${item.name.replace(/&quot;/g,'"')}</td>
                <td>${item.qty}</td>
            </tr>
        `;
    });
}

function downloadPDF() {
    const { jsPDF } = window.jspdf;
    var doc = new jsPDF();

    doc.setFontSize(16);
    doc.text("PLUMBING FITTINGS - CPVC ITEMS", 14, 20);

    doc.autoTable({
        startY: 30,
        head: [['S.NO', 'ITEM NAME', 'QUANTITY']],
        body: list.map((row, i) => [
            i + 1,
            row.name.replace(/&quot;/g,'"'),
            row.qty
        ]),
        theme: 'grid'
    });

    let finalY = doc.lastAutoTable.finalY + 20;

    doc.setFontSize(12);
    doc.text("S. ANBALAGAN", 14, finalY);
    doc.text("9842513183", 14, finalY + 8);

    doc.save("CPVC_List.pdf");
}

</script>

</body>
</html>
